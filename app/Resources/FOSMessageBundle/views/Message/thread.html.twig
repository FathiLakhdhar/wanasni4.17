{% extends 'FOSMessageBundle::layout.html.twig' %}

{% block fos_message_content %}

    <h2 class="page-header">{{ thread.subject }}</h2>
    <h3>{% trans from 'FOSMessageBundle' %}reply{% endtrans %}</h3>
    <div class="col-md-12">

        <h2 class="page-header">Discusion</h2>

        <div class="content-message">

            <div class="box box-success direct-chat direct-chat-success">
                <div class="box-header with-border">
                    <h3 class="box-title">Sarah Bullock</h3>
                    <div class="box-tools pull-right">
                                        <span data-toggle="tooltip" title="3 New Messages"
                                              class="badge bg-green">3</span>
                        <button class="btn btn-box-tool" data-widget="collapse"><i
                                    class="fa fa-minus"></i></button>
                        <button class="btn btn-box-tool" data-toggle="tooltip" title="Contacts"
                                data-widget="chat-pane-toggle"><i class="fa fa-comments"></i></button>
                        <button class="btn btn-box-tool" data-widget="remove"><i
                                    class="fa fa-times"></i></button>
                    </div>
                </div><!-- /.box-header -->
                <div class="box-body">
                    <!-- Conversations are loaded here -->
                    <div class="direct-chat-messages">
                        {% for message in thread.messages %}
                            <div class="messenger_thread_message">
                                {% if message.sender == app.user %}
                                    <!-- Message to the right -->
                                    <div class="direct-chat-msg right">
                                        <div class="direct-chat-info clearfix">
                                            <span class="direct-chat-name pull-right">{{ message.sender|e }}</span>
                                            <span class="direct-chat-timestamp pull-left">{{ message.createdAt|date("F jS \\a\\t g:ia") }}</span>
                                        </div><!-- /.direct-chat-info -->
                                        <img class="direct-chat-img" src="{{ asset('img/user.jpg') }}"
                                             alt="{{ message.sender|e }}"><!-- /.direct-chat-img -->
                                        <div class="direct-chat-text" id="message_{{ message.id }}">
                                            <p>
                                                {{ message.body }}
                                            </p>
                                        </div><!-- /.direct-chat-text -->
                                    </div><!-- /.direct-chat-msg -->
                                {% else %}
                                    <!-- Message. Default to the left -->
                                    <div class="direct-chat-msg">
                                        <div class="direct-chat-info clearfix">
                                            <span class="direct-chat-name pull-left">{{ message.sender|e }}</span>
                                            <span class="direct-chat-timestamp pull-right">{{ message.createdAt|date("F jS \\a\\t g:ia") }}</span>
                                        </div><!-- /.direct-chat-info -->
                                        <img class="direct-chat-img" src="{{ asset('img/user.jpg') }}"
                                             alt="{{ message.sender|e }}"><!-- /.direct-chat-img -->
                                        <div class="direct-chat-text" id="message_{{ message.id }}">
                                            <p>
                                                {{ message.body }}
                                            </p>
                                        </div><!-- /.direct-chat-text -->
                                    </div><!-- /.direct-chat-msg -->
                                {% endif %}
                            </div>
                        {% endfor %}

                    </div><!--/.direct-chat-messages-->

                </div><!-- /.box-body -->


                <div class="box-footer">
                    {{ form_start(form, {'method': 'post', 'action': path('fos_message_thread_view',{'threadId': thread.id}), 'attr': {'class':''}}) }}
                    <div class="form-group">
                        {{ form_widget(form.body,{'attr':{'class':'form-control','placeholder':'Votre r√©ponse...'}}) }}
                        {{ form_errors(form.body) }}
                    </div>
                    <div></div>
                    <button type="submit" class="btn btn-success btn-flat">Envoyer</button>
                    {{ form_end(form) }}
                </div><!-- /.box-footer-->

            </div>

        </div>
    </div>

{% endblock %}
